<div class="alain-default__content-title">
  <h1>
    首页
    <small>Welcome !</small>
  </h1>
</div>
<div nz-row nzGutter="16">
  <div nz-col nzSpan="8">
    <nz-card [nzTitle]="'告警'" >
      <div style="height: 210px">
        <g2-card [footer]="footer1">
          <trend flag="up" style="display:block; margin-top:2px;">
            待处理
            <span class="pl-sm">   {{notHandleNum}}</span>
          </trend>
          <trend flag="down">
            已处理
            <span class="pl-sm">    {{handledNum}}</span>
          </trend>
          <ng-template #footer1>
            <p class="text-truncate mb0">
              全部告警
              <span class="ml-sm">   {{threatNum}}</span>
            </p>
          </ng-template>
        </g2-card>
      </div>
    </nz-card>
  </div>
  <div nz-col nzSpan="8">
      <nz-card  [nzTitle]="'捕获报文'">
        <div echarts [options]="AaptureOption" class="demo-chart" style="height: 210px;"></div>
         <nz-select [(ngModel)]="AaptureMessageSelect" nzSize="small" (ngModelChange)="AaptureMessageSet()"
                  class="AaptureMessageSelect">
           <nz-option *ngFor="let option of AaptureMessageOptions" [nzLabel]="option.name" [nzValue]="option.id">
         </nz-option>
       </nz-select>
      </nz-card>
  </div>
  <div nz-col nzSpan="8">
    <nz-card  [nzTitle]="'检测流量'" [nzHoverable]="true">
      <div echarts [options]="FlowOption" class="demo-chart" style="height: 210px;"></div>
       <nz-select [(ngModel)]="DetectFlowSelect" nzSize="small" (ngModelChange)="DetectFlowSet()"
                  class="DetectFlowSelect">
           <nz-option *ngFor="let option of DetectFlowOptions" [nzLabel]="option.name" [nzValue]="option.id">
           </nz-option>
       </nz-select>
    </nz-card>
  </div>
</div>


<div nz-row nzGutter="16">
  <div nz-col nzSpan="12">
    <nz-card [nzTitle]="'域名危险等级'" >
      <div echarts [options]="Option1" class="demo-chart" style="height: 250px;"></div>
    </nz-card>
  </div>
  <div nz-col nzSpan="12">
    <nz-card  [nzTitle]="'ip访问统计'">
      <div echarts [options]="Option2" class="demo-chart" style="height: 250px;"></div>
      <nz-select [(ngModel)]="AaptureMessageSelect" nzSize="small" (ngModelChange)="AaptureMessageSet()"
                 class="AaptureMessageSelect">
        <nz-option *ngFor="let option of AaptureMessageOptions" [nzLabel]="option.name" [nzValue]="option.id">
        </nz-option>
      </nz-select>
    </nz-card>
  </div>
</div>

<div nz-row nzGutter="0">
    <nz-card  [nzTitle]="'威胁活动'" >
      <nz-table #filterTable [nzData]="listOfDisplayData" nzBordered  nzShowPagination nzShowSizeChanger  [nzShowQuickJumper]="true"
                [nzTotal]="total" nzFrontPagination="false"  [nzFooter]="'共'+total+'条数据'" [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize"
                (nzPageIndexChange)="refreshStatus()" (nzPageSizeChange)="refreshStatus()" (nzCurrentPageDataChange)="currentPageDataChange($event)">
       <thead>
       <tr>
         <th>时间</th>
         <th>源IP</th>
         <th>目的IP</th>
         <th>请求类型</th>
         <th>威胁信息</th>
       </tr>
       </thead>
        <tbody>
        <tr *ngFor="let data of filterTable.data">
          <td>{{ data.time | date:"yyyy-MM-dd HH:mm:ss" }}</td>
          <td>{{ data.srcIP }}</td>
          <td>{{ data.desIP }}</td>
          <td>{{ data.type }}</td>
          <td>{{ data.info }}</td>
        </tr>
        </tbody>
      </nz-table>
      <nz-select [(ngModel)]="threatenSelect" nzSize="small" (ngModelChange)="getFlowdata()"
                 class="threatenSelect">
        <nz-option *ngFor="let option of threatenOptions" [nzLabel]="option.name" [nzValue]="option.id">
        </nz-option>
      </nz-select>
    </nz-card>
</div>
